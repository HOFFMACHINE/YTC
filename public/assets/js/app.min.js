!function(){"use strict";angular.module("app",["app.index"])}(),function(){"use strict";angular.module("app.index",[])}(),function(){"use strict";function t(t,n,e,a){function o(){var n={url:_.fragment.url};_.video.isPreviewing=!0,t.getVideoInfo(n).then(function(t){_.fragment.video_id=t.video_id,_.fragment.start=1,_.fragment.end=t.end,_.fragment.title=t.title,_.fragment.description=t.description})}function r(){var e={url:_.fragment.url,start:_.fragment.start,end:_.fragment.end};_.video.isPreviewing=!0,t.getVideoEmbedUrl(e).then(function(t){_.fragment.embed_url=n.trustAsResourceUrl(t)})}function u(){var n={id:_.fragment.id};t.statusJob(n).then(function(t){_.status=t})}function i(){t.statusFragment().then(function(t){_.status_fragment=t})}function d(){t.globalStatusFragment().then(function(t){_.global_status=t})}function s(){var n={id:_.fragment.id};t.downloadVideo(n).then(function(t){_.download_job_id=t})}function c(){t.uploadVideo().then(function(t){_.upload_job_id=t})}function f(){t.uploadVideoOnYouTube().then(function(t){_.upload_yt_job_id=t})}function l(){var n={url:_.fragment.url,start:_.fragment.start,end:_.fragment.end,title:_.fragment.title,description:_.fragment.description,video_id:_.fragment.video_id};t.createFragment(n).then(function(t){_.fragment=t,_.fragment.isCreated=!0,_.cloud_id=_.fragment.video_id,s(),_.status="new";var n=a(function(){u(),"complete"===_.status&&a.cancel(n)},500),e=a(function(){i(),"downloaded"===_.status_fragment&&(c(),a.cancel(e)),"video_on_cloud"===_.status_fragment&&(a.cancel(e),_.fragment.isCreated=!1,_.fragment.cloudCreated=!0)},500),o=a(function(){m(),_.cloud_video_params.public_id===_.fragment.video_id&&(f(),a.cancel(o),_.fragment.isCreated=!1,_.fragment.cloudCreated=!0)},2500)})}function g(){t.getFragment().then(function(t){_.fragments=t})}function m(){t.resources().then(function(t){_.cloud_video_params=t})}function p(){t.getUser().then(function(t){_.user=t})}var _=this;_.video=[],_.user=[],_.fragment=[],_.status_fragment=[],_.global_status=[],_.cloud_id=[],_.interval_status_job=[],_.interval_status_fragment=[],_.interval_cloud_video=[],_.cloud_video_params=[],_.cloud_video=[],_.upload_job_id=[],_.download_job_id=[],_.upload_yt_job_id=[],_.status=[],_.getVideoInfo=o,_.getVideoEmbedUrl=r,_.downloadVideo=s,_.uploadVideo=c,_.uploadVideoOnYouTube=f,_.statusJob=u,_.statusFragment=i,_.globalStatusFragment=d,_.resources=m,_.createFragment=l,p(),g()}angular.module("app.index").controller("IndexController",t),t.$inject=["api","$sce","$timeout","$interval"]}(),function(){"use strict";function t(t){function n(n){return t.post("/api/video/info",n).then(function(t){return t.data})}function e(n){return t.post("/api/status_job",n).then(function(t){return t.data})}function a(){return t.post("/api/fragments/status").then(function(t){return t.data})}function o(){return t.post("/api/fragments/global/status").then(function(t){return t.data})}function r(){return t.post("/api/fragments/resources").then(function(t){return t.data})}function u(n){return t.post("/api/video/embed_url",n).then(function(t){return t.data})}function i(n){return t.post("/api/video/download",n).then(function(t){return t.data})}function d(){return t.post("/api/fragments/uploaded_on_cloudinary").then(function(t){return t.data})}function s(){return t.post("/api/fragments/uploaded_video_on_youtube").then(function(t){return t.data})}function c(){return t.get("/api/users/me").then(function(t){return t.data})}function f(n){return t.post("/api/fragments",n).then(function(t){return t.data})}function l(){return t.get("/api/fragments").then(function(t){return t.data})}return{getVideoInfo:n,getVideoEmbedUrl:u,downloadVideo:i,uploadVideo:d,uploadVideoOnYouTube:s,statusJob:e,statusFragment:a,globalStatusFragment:o,resources:r,getUser:c,getFragment:l,createFragment:f}}angular.module("app.index").factory("api",t),t.$inject=["$http"]}(),function(){"use strict";function t(){function t(t,n,e){$(n).embed()}return{restrict:"A",link:t}}angular.module("app.index").directive("appEmbed",t)}();