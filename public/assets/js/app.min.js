(function ()
{
    'use strict';

    angular.module('app', [
        'app.index'
    ]);
})();

(function ()
{
    'use strict';

    angular.module('app.index', []);
})();

(function ()
{
    'use strict';

    angular.module('app.index')
           .controller('IndexController', IndexController);

    IndexController.$inject = ['api', '$sce'];

    function IndexController(api, $sce)
    {
        var vm = this;

        vm.user = [];
        vm.fragment = [];
        vm.fragments = [];
        vm.test = [];
        vm.postInfo = [];
        vm.cloudinary = [];

        vm.preview = preview;
        vm.create = create;
        vm.postInfo = postInfo;
        vm.cloudinary = cloudinary;
        vm.download = download;
        vm.uploaded = uploaded;

        getUser();
        getFragment();
        // postInfo();

        /*
         |--------------------------------------------------------------------------------------------------------------
         | Fragments Download
         |--------------------------------------------------------------------------------------------------------------
         */

        function download()
        {
            var data = {
                user_id: '28'
            };

            api.download(data).then(function (data)
            {
                //
            });
        }

        function uploaded()
        {
            var data = {
                user_id: '28'
            };

            api.uploaded(data).then(function (data)
            {
                //
            });
        }

        function postInfo()
        {
            var data = {
                url: vm.fragment.url
            };

            api.postInfo(data).then(function (data)
            {
                vm.postInfo = data;
            });
        }

        /*
         |--------------------------------------------------------------------------------------------------------------
         | Fragments Claudinary
         |--------------------------------------------------------------------------------------------------------------
         */

        function cloudinary()
        {
            var data = {
                user_id: '28'
            };

            api.cloudinary(data).then(function (data)
            {
                vm.cloudinary = data;
            });
        }

        /*
         |--------------------------------------------------------------------------------------------------------------
         | Fragments
         |--------------------------------------------------------------------------------------------------------------
         */

        function preview()
        {
            var data = {
                url: vm.fragment.url,
                start: vm.fragment.start,
                end: vm.fragment.end
            };

            vm.fragment.isPreviewing = true;

            api.getEmbedUrl(data).then(function (data)
            {
                vm.fragment.embed_url = $sce.trustAsResourceUrl(data);
            });
        }

        function create()
        {
            var data = {
                url: vm.fragment.url,
                start: vm.fragment.start,
                end: vm.fragment.end,
                title: vm.fragment.title
            };

            vm.fragment.isCreating = true;

            api.createFragment(data).then(function (data)
            {
                vm.fragment = data;

                download();
                cloudinary();
                uploaded();


                // download();
            });
        }

        function getFragment()
        {

            api.getFragment().then(function (data)
            {
                vm.fragments = data;
            });
        }

        /*
         |--------------------------------------------------------------------------------------------------------------
         | Users
         |--------------------------------------------------------------------------------------------------------------
         */

        function getUser()
        {
            api.getUser().then(function (data)
            {
                vm.user = data;
            });
        }
    }
})();

(function ()
{
    'use strict';

    angular.module('app.index')
           .factory('api', api);

    api.$inject = ['$http'];

    function api($http)
    {
        return {
            "postInfo": postInfo,
            "cloudinary": cloudinary,
            "download": download,
            "uploaded": uploaded,
            "getEmbedUrl": getEmbedUrl,
            "getUser": getUser,
            "getFragment": getFragment,
            "createFragment": createFragment
        };

        function postInfo(data)
        {
            return $http.post('/api/fragments/video/info', data).then(function (response)
            {
                return response.data;
            });
        }

        function cloudinary(data)
        {
            return $http.post('/api/uploaded_on_cloudinary', data).then(function (response)
            {
                return response.data;
            });
        }

        function download(data)
        {
            return $http.post('/api/fragments/download', data).then(function (response)
            {
                return response.data;
            });
        }

        function uploaded(data)
        {
            return $http.post('/api/fragments/uploaded_on_youtube', data).then(function (response)
            {
                return response.data;
            });
        }

        function getEmbedUrl(data)
        {
            return $http.post('/api/fragments/embed_url', data).then(function (response)
            {
                return response.data;
            });
        }

        function getUser()
        {
            return $http.get('/api/users/me').then(function (response)
            {
                return response.data;
            });
        }

        function createFragment(data)
        {
            return $http.post('/api/fragments', data).then(function (response)
            {
                return response.data;
            });
        }

        function getFragment()
        {
            return $http.get('/api/fragments').then(function (response)
            {
                return response.data;
            });
        }
    }
})();

(function()
{
    'use strict';

    angular.module('app.index')
           .directive('appEmbed', appEmbed);

    function appEmbed()
    {
        return {
            restrict: 'A',
            link: link
        };

        function link(scope, element, attributes)
        {
            $(element).embed();
        }
    }
})();

//# sourceMappingURL=app.min.js.map
