!function(){"use strict";angular.module("app",["app.index"])}(),function(){"use strict";angular.module("app.index",[])}(),function(){"use strict";function t(t,n,e,o){function a(){var n={url:v.fragment.url};v.video.isPreviewing=!0,t.getVideoInfo(n).then(function(t){v.fragment.video_id=t.video_id,v.fragment.start=1,v.fragment.end=t.end,v.fragment.title=t.title,v.fragment.description=t.description})}function r(){var e={url:v.fragment.url,start:v.fragment.start,end:v.fragment.end};v.video.isPreviewing=!0,t.getVideoEmbedUrl(e).then(function(t){v.fragment.embed_url=n.trustAsResourceUrl(t)})}function i(){var n={id:v.fragment.id};t.statusJob(n).then(function(t){v.status=t})}function u(){t.statusFragment().then(function(t){v.status_fragment=t})}function d(){t.globalStatusFragment().then(function(t){v.global_status=t})}function s(){var n={id:v.fragment.id};t.downloadVideo(n).then(function(t){v.download_job_id=t})}function f(){t.uploadVideo().then(function(t){v.upload_job_id=t})}function c(){t.deleteVideoFile().then(function(t){})}function l(){t.uploadVideoOnYouTube().then(function(t){v.upload_yt_job_id=t})}function g(){var n={url:v.fragment.url,start:v.fragment.start,end:v.fragment.end,title:v.fragment.title,description:v.fragment.description,video_id:v.fragment.video_id};t.createFragment(n).then(function(t){v.fragment=t,v.fragment.isCreated=!0,v.cloud_id=v.fragment.video_id,s(),v.status="new";var n=o(function(){i(),"complete"===v.status&&o.cancel(n)},500),e=o(function(){u(),"downloaded"===v.status_fragment&&(f(),o.cancel(e)),"video_on_cloud"===v.status_fragment&&(o.cancel(e),v.fragment.isCreated=!1,v.fragment.cloudCreated=!0)},500),a=o(function(){p(),v.cloud_video_params.public_id===v.fragment.video_id&&(c(),l(),o.cancel(a),v.fragment.isCreated=!1,v.fragment.cloudCreated=!0)},2500)})}function m(){t.getFragment().then(function(t){v.fragments=t})}function p(){t.resources().then(function(t){v.cloud_video_params=t})}function _(){t.getUser().then(function(t){v.user=t})}var v=this;v.video=[],v.user=[],v.fragment=[],v.status_fragment=[],v.global_status=[],v.cloud_id=[],v.interval_status_job=[],v.interval_status_fragment=[],v.interval_cloud_video=[],v.cloud_video_params=[],v.cloud_video=[],v.upload_job_id=[],v.download_job_id=[],v.upload_yt_job_id=[],v.status=[],v.getVideoInfo=a,v.getVideoEmbedUrl=r,v.downloadVideo=s,v.uploadVideo=f,v.deleteVideoFile=c,v.uploadVideoOnYouTube=l,v.statusJob=i,v.statusFragment=u,v.globalStatusFragment=d,v.resources=p,v.createFragment=g,_(),m()}angular.module("app.index").controller("IndexController",t),t.$inject=["api","$sce","$timeout","$interval"]}(),function(){"use strict";function t(t){function n(n){return t.post("/api/video/info",n).then(function(t){return t.data})}function e(n){return t.post("/api/status_job",n).then(function(t){return t.data})}function o(){return t.post("/api/fragments/status").then(function(t){return t.data})}function a(){return t.post("/api/fragments/global/status").then(function(t){return t.data})}function r(){return t.post("/api/fragments/resources").then(function(t){return t.data})}function i(n){return t.post("/api/video/embed_url",n).then(function(t){return t.data})}function u(n){return t.post("/api/video/download",n).then(function(t){return t.data})}function d(){return t.post("/api/fragments/uploaded_on_cloudinary").then(function(t){return t.data})}function s(){return t.post("/api/fragments/delete_video_file").then(function(t){return t.data})}function f(){return t.post("/api/fragments/uploaded_video_on_youtube").then(function(t){return t.data})}function c(){return t.get("/api/users/me").then(function(t){return t.data})}function l(n){return t.post("/api/fragments",n).then(function(t){return t.data})}function g(){return t.get("/api/fragments").then(function(t){return t.data})}return{getVideoInfo:n,getVideoEmbedUrl:i,downloadVideo:u,uploadVideo:d,deleteVideoFile:s,uploadVideoOnYouTube:f,statusJob:e,statusFragment:o,globalStatusFragment:a,resources:r,getUser:c,getFragment:g,createFragment:l}}angular.module("app.index").factory("api",t),t.$inject=["$http"]}(),function(){"use strict";function t(){function t(t,n,e){$(n).embed()}return{restrict:"A",link:t}}angular.module("app.index").directive("appEmbed",t)}();