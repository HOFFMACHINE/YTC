!function(){"use strict";angular.module("app",["app.index"])}(),function(){"use strict";angular.module("app.index",["ng-token-auth","720kb.socialshare","ngclipboard","ui-rangeSlider"])}(),function(){"use strict";function t(t,e,n,r,i){function a(){t.authenticate("google")}function o(){t.signOut()}function d(){var t={id:j.user.id};i.getUserFragments(t).then(function(t){j.user.fragments=t})}function u(){var t={url:j.video.url};i.createVideo(t).then(function(t){j.video=t,j.video.isCreated=!0,j.fragment.start_from=0,j.fragment.end_from=j.video.duration,j.fragment.title=j.video.title,j.fragment.description=j.video.description,m()})}function c(t){j.active_fragment=t;var n={id:j.active_fragment.id};i.getFragmentEmbedUrl(n).then(function(t){j.active_fragment.embed_url=e.trustAsResourceUrl(t.embed_url)})}function f(){var t={id:j.active_fragment.id};i.deleteFragment(t).then(function(){d()})}function g(){var t={id:j.video.id};i.downloadVideo(t).then(function(t){j.video.job_id=t.job_id;var e=n(function(){"error"==j.video.status&&(v(),p(),n.cancel(e)),"downloaded"==j.video.status&&(s(),n.cancel(e)),"uploaded"==j.video.status&&(_(),n.cancel(e)),l()},5e3)})}function s(){var t={id:j.video.id};i.uploadVideo(t).then(function(t){j.video.job_id=t.job_id;var e=n(function(){"error"==j.video.status&&(v(),p(),n.cancel(e)),"uploaded"==j.video.status&&(_(),n.cancel(e)),l()},5e3)})}function m(){var t={id:j.video.id,start_from:j.fragment.start_from,end_from:j.fragment.end_from};i.getVideoEmbedUrl(t).then(function(t){j.video.embed_url=e.trustAsResourceUrl(t.embed_url)})}function l(){var t={id:j.video.id,job_id:j.video.job_id};i.getVideoStatus(t).then(function(t){j.video.status=t.status})}function v(){var t={id:j.video.id};i.getVideoError(t).then(function(t){j.error=t.error})}function p(){j.error="",j.video=[],j.fragment=[]}function h(){var t={user_id:j.user.id,video_id:j.video.id,start_from:j.fragment.start_from,end_from:j.fragment.end_from,title:j.fragment.title,description:j.fragment.description};i.createFragment(t).then(function(t){j.fragment=t,j.fragment.isCreating=!0,g()})}function _(){var t={id:j.fragment.id};i.uploadFragment(t).then(function(t){j.fragment.job_id=t.job_id;var e=n(function(){"error"==j.fragment.status&&(F(),p(),n.cancel(e)),"uploaded"==j.fragment.status&&(V(),r(function(){j.video.isCreated=!1,j.fragment.isCreating=!1,j.fragment.isCreated=!0},5e3),n.cancel(e)),b()},5e3)})}function b(){var t={id:j.fragment.id,job_id:j.fragment.job_id};i.getFragmentStatus(t).then(function(t){j.fragment.status=t.status})}function F(){var t={id:j.fragment.id};i.getFragmentError(t).then(function(t){j.error=t.error})}function V(){var t={id:j.fragment.id};i.getFragmentUrl(t).then(function(t){j.fragment.url=t.url,U()})}function U(){var t={id:j.fragment.id};i.getFragmentEmbedUrl(t).then(function(t){j.fragment.embed_url=e.trustAsResourceUrl(t.embed_url)})}var j=this;j.error="",j.user=t.user,j.video=[],j.fragment=[],j.active_fragment=[],j.results=[],j.login=a,j.logout=o,j.getUserFragments=d,j.createVideo=u,j.downloadVideo=g,j.uploadVideo=s,j.getVideoStatus=l,j.getVideoError=v,j.getVideoEmbedUrl=m,j.newFragment=p,j.setActiveFragment=c,j.createFragment=h,j.deleteFragment=f,j.uploadFragment=_,j.getFragmentStatus=b,j.getFragmentError=F,j.getFragmentUrl=V,j.getFragmentEmbedUrl=U}angular.module("app.index").controller("IndexController",t),t.$inject=["$auth","$sce","$interval","$timeout","api"]}(),function(){"use strict";function t(t){t.configure({apiUrl:"/api"})}angular.module("app").config(t),t.$inject=["$authProvider"]}(),function(){"use strict";function t(t){function e(e){return t.get("/api/users/"+e.id+"/fragments").then(function(t){return t.data})}function n(e){return t.post("/api/videos",e).then(function(t){return t.data})}function r(e){return t.get("/api/videos/"+e.id+"/download").then(function(t){return t.data})}function i(e){return t.get("/api/videos/"+e.id+"/upload").then(function(t){return t.data})}function a(e){return t.post("/api/videos/"+e.id+"/embed_url",e).then(function(t){return t.data})}function o(e){return t.post("/api/videos/"+e.id+"/status",e).then(function(t){return t.data})}function d(e){return t.get("/api/videos/"+e.id+"/error").then(function(t){return t.data})}function u(e){return t.post("/api/fragments",e).then(function(t){return t.data})}function c(e){return t["delete"]("/api/fragments/"+e.id).then(function(t){return t.data})}function f(e){return t.get("/api/fragments/"+e.id+"/upload").then(function(t){return t.data})}function g(e){return t.get("/api/fragments/"+e.id+"/url").then(function(t){return t.data})}function s(e){return t.get("/api/fragments/"+e.id+"/embed_url").then(function(t){return t.data})}function m(e){return t.post("/api/fragments/"+e.id+"/status",e).then(function(t){return t.data})}function l(e){return t.get("/api/fragments/"+e.id+"/error").then(function(t){return t.data})}return{getUserFragments:e,createVideo:n,downloadVideo:r,uploadVideo:i,getVideoEmbedUrl:a,getVideoStatus:o,getVideoError:d,createFragment:u,deleteFragment:c,uploadFragment:f,getFragmentUrl:g,getFragmentEmbedUrl:s,getFragmentStatus:m,getFragmentError:l}}angular.module("app.index").factory("api",t),t.$inject=["$http"]}(),function(){"use strict";function t(){function t(t,e,n){$(e).tab()}return{restrict:"A",link:t}}angular.module("app.index").directive("appTab",t)}(),function(){"use strict";function t(){function t(t,e,n){$(e).on("click",function(){var t=$(n.modalId);t.modal({onHide:function(){t.find("iframe").attr("src",t.find("iframe").attr("src"))},selector:{close:".close"}}).modal("show")})}return{restrict:"A",link:t}}angular.module("app.index").directive("appModal",t)}();