!function(){"use strict";angular.module("app",["app.index"])}(),function(){"use strict";angular.module("app.index",["ng-token-auth"])}(),function(){"use strict";function t(t,e,n,a,o){function r(){e.authenticate("google")}function u(){e.signOut()}function i(){var t={url:_.fragment.url};_.video.isPreviewing=!0,o.getVideoInfo(t).then(function(t){_.fragment.video_id=t.video_id,_.fragment.start=1,_.fragment.end=t.end,_.fragment.title=t.title,_.fragment.description=t.description})}function d(){var t={url:_.fragment.url,start:_.fragment.start,end:_.fragment.end};_.video.isPreviewing=!0,o.getVideoEmbedUrl(t).then(function(t){_.fragment.embed_url=n.trustAsResourceUrl(t.embed_url)})}function f(){t.debug("ACTION - download from youtube"),o.downloadVideo(_.fragment.id).then(function(t){_.fragment.status=t.status});var e=a(function(){"downloaded"==_.fragment.status&&g(),"video_on_cloud"==_.fragment.status&&c(),"downloaded"!=_.fragment.status&&"video_on_cloud"!=_.fragment.status||a.cancel(e),m()},5e3)}function g(){t.debug("ACTION - upload on cloudnary"),o.uploadVideo(_.fragment.id).then(function(t){_.fragment.status=t.status});var e=a(function(){"upload_on_cloud"!=_.fragment.status&&"video_on_cloud"!=_.fragment.status||(c(),_.fragment.cloudCreated=!0,a.cancel(e)),m()},5e3)}function c(){t.debug("ACTION - upload on youtube"),o.uploadVideoOnYouTube(_.fragment.id).then(function(){l()});var e=a(function(){"uploaded_on_yt"==_.fragment.status&&(p(),_.fragment.ytCreated=!0,_.fragment.isCreated=!1,a.cancel(e)),m()},5e3)}function l(){t.debug("ACTION - delete file"),o.deleteVideoFile(_.fragment.id).then(function(){})}function s(){var t={user_id:_.user.id,url:_.fragment.url,start:_.fragment.start,end:_.fragment.end,title:_.fragment.title,description:_.fragment.description,video_id:_.fragment.video_id};o.createFragment(t).then(function(t){_.fragment=t,_.fragment.isCreated=!0,f()})}function m(){o.getFragmentStatus(_.fragment.id).then(function(e){t.debug("STATUS - "+e.status),_.fragment.status=e.status})}function p(){var t={id:_.fragment.id};o.getNewUrl(t).then(function(t){_.new_url=t.url})}var _=this;_.video=[],_.user=e.user,_.fragment=[],_.login=r,_.logout=u,_.getVideoInfo=i,_.getVideoEmbedUrl=d,_.downloadVideo=f,_.uploadVideo=g,_.deleteVideoFile=l,_.uploadVideoOnYouTube=c,_.getNewUrl=p,_.createFragment=s,_.getFragmentStatus=m}angular.module("app.index").controller("IndexController",t),t.$inject=["$log","$auth","$sce","$interval","api"]}(),function(){"use strict";function t(t){t.configure({apiUrl:"/api"})}angular.module("app").config(t),t.$inject=["$authProvider"]}(),function(){"use strict";function t(t){function e(e){return t.post("/api/video/info",e).then(function(t){return t.data})}function n(e){return t.post("/api/video/embed_url",e).then(function(t){return t.data})}function a(e){return t.get("/api/fragments/"+e+"/download").then(function(t){return t.data})}function o(e){return t.get("/api/fragments/"+e+"/uploaded_on_cloudinary").then(function(t){return t.data})}function r(e){return t.get("/api/fragments/"+e+"/delete_video_file").then(function(t){return t.data})}function u(e){return t.get("/api/fragments/"+e+"/upload_video_on_youtube").then(function(t){return t.data})}function i(e){return t.post("/api/fragments",e).then(function(t){return t.data})}function d(e){return t.get("/api/fragments/"+e+"/status").then(function(t){return t.data})}function f(e){return t.post("/api/new_url",e).then(function(t){return t.data})}return{getVideoInfo:e,getVideoEmbedUrl:n,downloadVideo:a,uploadVideo:o,deleteVideoFile:r,uploadVideoOnYouTube:u,createFragment:i,getFragmentStatus:d,getNewUrl:f}}angular.module("app.index").factory("api",t),t.$inject=["$http"]}();